<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reloj Digital con Alarma</title>
    <style>
        /* Resetear estilos por defecto */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Fondo del body */
        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* Contenedor principal */
        .container {
            background: #0f3460;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), inset 0 0 30px rgba(16, 185, 129, 0.1);
            padding: 40px;
            max-width: 700px;
            width: 100%;
            border: 2px solid #10b981;
        }

        /* T√≠tulo */
        h1 {
            color: #10b981;
            text-align: center;
            margin-bottom: 40px;
            font-size: 28px;
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
            letter-spacing: 2px;
        }

        /* Secci√≥n del reloj */
        .clock-section {
            background: #0a1929;
            border: 2px solid #10b981;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: inset 0 0 20px rgba(16, 185, 129, 0.1);
        }

        /* Display del reloj - efecto digital */
        .clock-display {
            font-size: 80px;
            font-weight: bold;
            color: #10b981;
            text-align: center;
            text-shadow: 0 0 20px rgba(16, 185, 129, 0.8);
            font-family: 'Courier New', monospace;
            letter-spacing: 5px;
            margin-bottom: 20px;
            font-variant-numeric: tabular-nums;
        }

        /* Display de la fecha */
        .date-display {
            font-size: 18px;
            color: #60a5fa;
            text-align: center;
            text-shadow: 0 0 10px rgba(96, 165, 250, 0.5);
            letter-spacing: 1px;
            font-weight: 600;
        }

        /* Secci√≥n de alarma */
        .alarm-section {
            background: #0a1929;
            border: 2px solid #f59e0b;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: inset 0 0 20px rgba(245, 158, 11, 0.05);
        }

        /* T√≠tulo de secci√≥n */
        .alarm-section h2 {
            color: #f59e0b;
            font-size: 20px;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(245, 158, 11, 0.5);
            letter-spacing: 1px;
        }

        /* Grupo de entrada */
        .input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        /* Input time */
        input[type="time"] {
            padding: 12px;
            font-size: 16px;
            background: #1e293b;
            color: #10b981;
            border: 2px solid #f59e0b;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-weight: 600;
            flex: 1;
            min-width: 150px;
        }

        input[type="time"]:focus {
            outline: none;
            box-shadow: 0 0 15px rgba(245, 158, 11, 0.6);
        }

        /* Estilos de botones */
        button {
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
        }

        /* Bot√≥n Establecer Alarma */
        #setAlarmBtn {
            background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);
            color: #0a1929;
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.4);
            flex: 0.5;
            min-width: 140px;
        }

        #setAlarmBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.6);
        }

        #setAlarmBtn:active {
            transform: translateY(0);
        }

        /* Bot√≥n Cancelar Alarma */
        #cancelAlarmBtn {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4);
            flex: 0.5;
            min-width: 140px;
        }

        #cancelAlarmBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.6);
        }

        #cancelAlarmBtn:active {
            transform: translateY(0);
        }

        /* Estado del bot√≥n deshabilitado */
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Indicador de alarma activa */
        .alarm-status {
            background: #1e293b;
            border: 2px solid #10b981;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            margin-top: 20px;
            color: #10b981;
            font-size: 16px;
            font-weight: 600;
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
            display: none;
        }

        .alarm-status.active {
            display: block;
            animation: pulse 1s infinite;
        }

        /* Animaci√≥n de pulso */
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                border-color: #10b981;
                box-shadow: inset 0 0 10px rgba(16, 185, 129, 0.3);
            }
            50% {
                opacity: 0.7;
                border-color: #34d399;
                box-shadow: inset 0 0 20px rgba(16, 185, 129, 0.5);
            }
        }

        /* √Årea de notificaci√≥n de alarma */
        .alarm-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: #ef4444;
            color: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(239, 68, 68, 0.8);
            z-index: 1000;
            text-align: center;
            font-size: 24px;
            font-weight: 700;
            border: 3px solid #dc2626;
            animation: alarmFadeIn 0.3s ease forwards;
            display: none;
        }

        .alarm-notification.alarm-ringing {
            animation: alarmRinging 0.5s infinite;
        }

        /* Animaci√≥n de entrada de alarma */
        @keyframes alarmFadeIn {
            to {
                transform: translate(-50%, -50%) scale(1);
            }
        }

        /* Animaci√≥n de parpadeo de alarma */
        @keyframes alarmRinging {
            0%, 100% {
                background: #ef4444;
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                background: #dc2626;
                transform: translate(-50%, -50%) scale(1.05);
            }
        }

        /* Indicador LED de alarma */
        .alarm-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            background: #ef4444;
            border-radius: 50%;
            margin-right: 8px;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.8);
            animation: ledBlink 1s infinite;
        }

        .alarm-indicator.inactive {
            background: #6b7280;
            box-shadow: none;
            animation: none;
        }

        /* Animaci√≥n de LED */
        @keyframes ledBlink {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.3;
            }
        }

        /* Informaci√≥n */
        .info {
            background: #1e293b;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            border-radius: 8px;
            font-size: 13px;
            color: #60a5fa;
            margin-top: 20px;
            line-height: 1.6;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 22px;
                margin-bottom: 25px;
            }

            .clock-display {
                font-size: 50px;
                letter-spacing: 3px;
                margin-bottom: 15px;
            }

            .date-display {
                font-size: 14px;
            }

            .input-group {
                flex-direction: column;
            }

            input[type="time"] {
                min-width: 100%;
                flex: unset;
            }

            #setAlarmBtn,
            #cancelAlarmBtn {
                flex: 1;
                min-width: 100%;
            }

            .alarm-notification {
                padding: 30px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚è∞ RELOJ DIGITAL CON ALARMA</h1>

        <!-- Secci√≥n del reloj -->
        <div class="clock-section">
            <!-- Display del reloj -->
            <div class="clock-display" id="clockDisplay">00:00:00</div>

            <!-- Display de la fecha -->
            <div class="date-display" id="dateDisplay">Lunes, 01 de enero de 2025</div>
        </div>

        <!-- Secci√≥n de alarma -->
        <div class="alarm-section">
            <h2>‚è≤Ô∏è CONFIGURAR ALARMA</h2>

            <div class="input-group">
                <input 
                    type="time" 
                    id="alarmTime" 
                    placeholder="HH:MM"
                    title="Selecciona la hora de la alarma"
                >
                <button id="setAlarmBtn">Establecer Alarma</button>
                <button id="cancelAlarmBtn" disabled>Cancelar Alarma</button>
            </div>

            <!-- Indicador de alarma activa -->
            <div class="alarm-status" id="alarmStatus">
                <span class="alarm-indicator"></span>
                ALARMA ACTIVA - Suena a las <span id="alarmTimeDisplay">--:--</span>
            </div>

            <!-- Informaci√≥n -->
            <div class="info">
                <strong>üìå C√≥mo usar:</strong><br>
                1. Selecciona una hora en el campo de tiempo<br>
                2. Haz clic en "Establecer Alarma"<br>
                3. La alarma sonar√° cuando la hora actual coincida<br>
                4. Puedes cancelarla en cualquier momento
            </div>
        </div>
    </div>

    <!-- Notificaci√≥n de alarma -->
    <div class="alarm-notification" id="alarmNotification">
        üîî ¬°¬°ALARMA SONANDO!! üîî<br>
        <span style="font-size: 16px; margin-top: 10px; display: block;">Haz clic para detener</span>
    </div>

    <script>
        /* ============== VARIABLES GLOBALES ============== */
        let alarmaActiva = false;
        let horaAlarma = null;
        let alarmaEnSonando = false;
        let audioContext = null;
        let oscillator = null;
        let gainNode = null;

        /* ============== NOMBRES DE MESES Y D√çAS ============== */
        const meses = [
            'enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio',
            'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'
        ];

        const dias = [
            'domingo', 'lunes', 'martes', 'mi√©rcoles', 
            'jueves', 'viernes', 's√°bado'
        ];

        /**
         * Formatea un n√∫mero agregando un cero a la izquierda si es necesario
         * @param {number} numero - N√∫mero a formatear
         * @returns {string} N√∫mero formateado con 2 d√≠gitos
         */
        function formatearNumero(numero) {
            return numero < 10 ? '0' + numero : numero;
        }

        /**
         * Obtiene la hora actual en formato HH:MM:SS
         * @returns {string} Hora formateada
         */
        function obtenerHoraActual() {
            const ahora = new Date();
            const horas = formatearNumero(ahora.getHours());
            const minutos = formatearNumero(ahora.getMinutes());
            const segundos = formatearNumero(ahora.getSeconds());

            return `${horas}:${minutos}:${segundos}`;
        }

        /**
         * Obtiene la fecha actual en formato espa√±ol
         * @returns {string} Fecha formateada (ej: "Lunes, 01 de enero de 2025")
         */
        function obtenerFechaActual() {
            const ahora = new Date();
            const dia = dias[ahora.getDay()];
            const numeroDia = formatearNumero(ahora.getDate());
            const mes = meses[ahora.getMonth()];
            const a√±o = ahora.getFullYear();

            // Capitalizar el primer car√°cter del d√≠a
            const diaCapitalizado = dia.charAt(0).toUpperCase() + dia.slice(1);

            return `${diaCapitalizado}, ${numeroDia} de ${mes} de ${a√±o}`;
        }

        /**
         * Obtiene la hora actual en formato HH:MM (sin segundos)
         * @returns {string} Hora formateada (ej: "14:30")
         */
        function obtenerHoraActualSinSegundos() {
            const ahora = new Date();
            const horas = formatearNumero(ahora.getHours());
            const minutos = formatearNumero(ahora.getMinutes());

            return `${horas}:${minutos}`;
        }

        /**
         * Actualiza el reloj y la fecha en la pantalla
         * - Se ejecuta cada segundo v√≠a setInterval
         * - Actualiza el display digital
         */
        function actualizarReloj() {
            // Obtener hora y fecha actual
            const horaActual = obtenerHoraActual();
            const fechaActual = obtenerFechaActual();

            // Actualizar elementos en el HTML
            document.getElementById('clockDisplay').textContent = horaActual;
            document.getElementById('dateDisplay').textContent = fechaActual;

            // Verificar si la alarma debe sonar
            if (alarmaActiva && !alarmaEnSonando) {
                verificarAlarma();
            }
        }

        /**
         * Verifica si la hora actual coincide con la hora de la alarma
         * Si coincide, activa la alarma
         */
        function verificarAlarma() {
            // Obtener hora actual sin segundos (para comparaci√≥n)
            const horaActual = obtenerHoraActualSinSegundos();

            // Comparar con la hora de la alarma
            if (horaActual === horaAlarma) {
                activarAlarma();
            }
        }

        /**
         * Activa la alarma:
         * - Muestra notificaci√≥n visual
         * - Reproduce sonido (simulado con alert)
         * - Marca la alarma como sonando
         */
        function activarAlarma() {
            alarmaEnSonando = true;
            console.log(`¬°ALARMA SONANDO! - Hora: ${horaAlarma}`);

            // Mostrar notificaci√≥n visual
            const notificacion = document.getElementById('alarmNotification');
            notificacion.classList.add('alarm-ringing');
            notificacion.style.display = 'flex';
            notificacion.style.flexDirection = 'column';
            notificacion.style.justifyContent = 'center';
            notificacion.style.alignItems = 'center';

            // Reproducir sonido (simulado)
            reproducirSonidoAlarma();

            // Permitir detener la alarma al hacer clic
            notificacion.addEventListener('click', detenerAlarma, { once: true });
        }

        /**
         * Reproduce un sonido de alarma zumbante y fuerte
         * Usa Web Audio API para generar un tono sinusoidal
         */
        function reproducirSonidoAlarma() {
            try {
                // Crear contexto de audio si no existe
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }

                // Reanudar contexto si est√° suspendido
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }

                // Crear nodos de audio
                oscillator = audioContext.createOscillator();
                gainNode = audioContext.createGain();

                // Configurar oscilador (onda sinusoidal)
                oscillator.type = 'sine';
                oscillator.frequency.value = 800; // Frecuencia inicial en Hz

                // Configurar ganancia (volumen fuerte)
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);

                // Conectar nodos
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                // Iniciar oscilador
                oscillator.start(audioContext.currentTime);

                // Crear efecto de zumbido variando la frecuencia
                const now = audioContext.currentTime;
                oscillator.frequency.setValueAtTime(800, now);
                oscillator.frequency.linearRampToValueAtTime(600, now + 0.1);
                oscillator.frequency.linearRampToValueAtTime(800, now + 0.2);

                console.log('üîî Sonido de alarma reproducido');
            } catch (error) {
                console.error('Error al reproducir sonido:', error);
                // Fallback: vibraci√≥n
                if (navigator.vibrate) {
                    navigator.vibrate([200, 100, 200, 100, 200, 100]);
                }
            }
        }

        /**
         * Detiene el sonido de alarma
         */
        function detenerSonidoAlarma() {
            try {
                if (oscillator && audioContext) {
                    oscillator.stop(audioContext.currentTime);
                    oscillator = null;
                    gainNode = null;
                }
            } catch (error) {
                console.error('Error al detener sonido:', error);
            }
        }

        /**
         * Detiene la alarma:
         * - Oculta la notificaci√≥n
         * - Desactiva la bandera de alarma sonando
         * - La alarma se puede volver a activar el pr√≥ximo minuto
         */
        function detenerAlarma() {
            alarmaEnSonando = false;

            // Detener el sonido
            detenerSonidoAlarma();

            const notificacion = document.getElementById('alarmNotification');
            notificacion.classList.remove('alarm-ringing');
            notificacion.style.display = 'none';

            console.log('‚úì Alarma detenida');
        }

        /**
         * Establece una nueva alarma
         * - Obtiene la hora del input
         * - Valida que sea una hora futura
         * - Activa el indicador de alarma
         * - Habilita/deshabilita botones seg√∫n corresponda
         */
        function establecerAlarma() {
            const inputAlarma = document.getElementById('alarmTime').value;

            // Validar que se haya seleccionado una hora
            if (!inputAlarma) {
                alert('Por favor selecciona una hora');
                return;
            }

            // Obtener hora actual sin segundos
            const horaActual = obtenerHoraActualSinSegundos();

            // Validar que la alarma sea para el futuro (misma hora o despu√©s)
            if (inputAlarma < horaActual) {
                alert('La alarma debe ser a una hora futura.\nLa alarma sonar√° ma√±ana a esa hora.');
            }

            // Guardar la hora de alarma
            horaAlarma = inputAlarma;
            alarmaActiva = true;
            alarmaEnSonando = false;

            // Actualizar interfaz
            document.getElementById('alarmTimeDisplay').textContent = horaAlarma;
            document.getElementById('alarmStatus').classList.add('active');
            document.getElementById('setAlarmBtn').disabled = true;
            document.getElementById('cancelAlarmBtn').disabled = false;
            document.getElementById('alarmTime').disabled = true;

            console.log(`‚úì Alarma establecida para las ${horaAlarma}`);
        }

        /**
         * Cancela la alarma activa:
         * - Desactiva el indicador de alarma
         * - Limpia la hora guardada
         * - Detiene la alarma si est√° sonando
         * - Habilita/deshabilita botones seg√∫n corresponda
         */
        function cancelarAlarma() {
            // Detener la alarma si est√° sonando
            if (alarmaEnSonando) {
                detenerAlarma();
            }

            // Limpiar datos
            alarmaActiva = false;
            horaAlarma = null;
            alarmaEnSonando = false;

            // Actualizar interfaz
            document.getElementById('alarmStatus').classList.remove('active');
            document.getElementById('setAlarmBtn').disabled = false;
            document.getElementById('cancelAlarmBtn').disabled = true;
            document.getElementById('alarmTime').disabled = false;
            document.getElementById('alarmTime').value = '';

            console.log('‚úì Alarma cancelada');
        }

        /* ============== EVENT LISTENERS ============== */

        // Bot√≥n para establecer alarma
        document.getElementById('setAlarmBtn').addEventListener('click', establecerAlarma);

        // Bot√≥n para cancelar alarma
        document.getElementById('cancelAlarmBtn').addEventListener('click', cancelarAlarma);

        // Permitir establecer alarma al presionar Enter
        document.getElementById('alarmTime').addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                establecerAlarma();
            }
        });

        /* ============== INICIALIZACI√ìN ============== */

        // Actualizar reloj inmediatamente
        actualizarReloj();

        // Actualizar reloj cada segundo (cada 1000ms)
        setInterval(actualizarReloj, 1000);

        console.log('‚úì Reloj digital inicializado correctamente');
    </script>
</body>
</html>
